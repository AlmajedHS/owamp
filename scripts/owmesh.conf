# $Id$
# Abilene mesh config script.
#
# - boote

# Not likely to change... Probably should move to DEFS in Conf.pm.
DigestSuffix		.owd
SessionSuffix		.owp
PowCmd			powstream
DigestCmd		owdigest
DevNull			/dev/null

# Global in nature...
!Debug
Verbose
SyslogFacility		local5

UserName		owamp
GroupName		owamp

SecretNames		21Mar2003 FallBack
# SecretName is "fetched" relative to Node, so that different nodes
# can use different keys.
SecretName		21Mar2003
21Mar2003		NewFullMeshPasswd
FallBack		TingsBeBerryBerryBadMon

# Central host config params
# How do nms nodes contact the central database.
CentralHost		ndb1-blmt.abilene.ucaid.edu
CentralHostPort		8569

# Where to uptime reports get sent for the central portion?
UpTimeSendToAddr	ndb1-blmt.abilene.ucaid.edu
UpTimeSendToPort	5433

# read timeout on file upload socket.
CentralHostTimeout	60

# All this is going to change with the SQL database implementation...
CentralDataDir		~boote/data
CentralPerDirDB		info.db
CentralPerDirValidFile	valid_time
CentralWWWDir           /home/boote/public_html/abilene
CentralArchiveDir	~boote/archive
UpTimeDBFile		liveupdate.db

#
# These define how the nms nodes deal with the uptime pairs on the local
# side and how often they send the updates.
#
# How often to send uptime updates. (seconds)
UpTimeSendInterval	60
# How many "pairs" of up/down times are send/saved.
UpTimeSendPairs		10
UpTimeMaxMesgLen	1024


# connect/write/read timeout for sending socket
# (Can be set on a per-node bases if needed.)
SendTimeout		60

# Parameters used by nodes... (May be overwritten in a NODE section.)
DataDir			~owamp/pow-data
OwampdVarDir		/var/run

#
# Stream definitions for each "meshtype"
# Keep these in the "global" portion to effect both v4 and v6, otherwise
# put them in <MESH=$mtype>blah,blah</MESH> blocks.
#
# 0.1*300 = ~30 seconds per file.
OWPINTERVAL		0.1
OWPSESSIONFILESIZE	300
OWPLOSSTHRESH		10

# This is about 12 hours... Since 2 control connections are in use, this
# means we a test can survive ~24 hour network partitions.
OWPSESSIONDURATION	43200
# defaults to min...
!OWPPACKETSIZE

#
# Mesh description section
#
MESHNODES	HSTN IPLS LOSA NYCM SNVA WASH DNVR KSCY CHIN STTL ATLA
MESHTYPES	V4 V6
ADDRTYPES	V4 V6

# Node specific defs.
<NODE=HSTN>
MESHV4
MESHV6
ADJNODES		ATLA KSCY LOSA
UpTimeSendToAddr	198.32.10.220
ADDRV4			198.32.10.220
ADDRV6			2001:468:11:2:203:47ff:fed5:c78b
</NODE>

<NODE=IPLS>
MESHV4
MESHV6
ADJNODES		CHIN KSCY ATLA
UpTimeSendToAddr	198.32.10.228
ADDRV4			198.32.10.228
ADDRV6			2001:468:12:2:203:47ff:fed5:c577
</NODE>

<NODE=LOSA>
MESHV4
MESHV6
ADJNODES		SNVA HSTN
UpTimeSendToAddr	198.32.10.244
ADDRV4			198.32.10.244
ADDRV6			2001:468:14:2:203:47ff:fed5:c571
</NODE>

<NODE=NYCM>
MESHV4
MESHV6
ADJNODES		CHIN WASH
UpTimeSendToAddr	198.32.10.252
ADDRV4			198.32.10.252
ADDRV6			2001:468:15:2:203:47ff:fef1:505d
</NODE>

<NODE=SNVA>
MESHV4
MESHV6
ADJNODES		LOSA KSCY DNVR STTL
UpTimeSendToAddr	198.32.11.140
ADDRV4			198.32.11.140
ADDRV6			2001:468:17:2:203:47ff:fed5:c771
</NODE>

<NODE=WASH>
MESHV4
MESHV6
ADJNODES		NYCM ATLA
UpTimeSendToAddr	198.32.11.148
ADDRV4			198.32.11.148
ADDRV6			2001:468:18:2:203:47ff:fed5:c779
</NODE>

<NODE=DNVR>
MESHV4
MESHV6
ADJNODES		KSCY STTL SNVA
UpTimeSendToAddr	198.32.10.212
ADDRV4			198.32.10.212
ADDRV6			2001:468:10:2:203:47ff:fed5:c585
</NODE>

<NODE=KSCY>
MESHV4
MESHV6
ADJNODES		IPLS DNVR SNVA HSTN
UpTimeSendToAddr	198.32.10.236
ADDRV4			198.32.10.236
ADDRV6			2001:468:13:2:203:47ff:fed5:c783
</NODE>

<NODE=CHIN>
MESHV4
!MESHV6
ADJNODES		NYCM IPLS
UpTimeSendToAddr	198.32.10.204
ADDRV4			198.32.10.204
#ADDRV6			*UNKNOWN*
</NODE>

<NODE=STTL>
MESHV4
MESHV6
ADJNODES		DNVR SNVA
UpTimeSendToAddr	198.32.10.236
ADDRV4			198.32.10.236
ADDRV6			2001:468:16:2:203:47ff:fed5:c75a
</NODE>

<NODE=ATLA>
MESHV4
!MESHV6
ADJNODES		WASH IPLS HSTN
UpTimeSendToAddr	198.32.10.196
ADDRV4			198.32.10.196
#ADDRV6			*UNKNOWN*
</NODE>

# Section to define resolution of data we are keeping, and what time periods
# we are keeping that data. (Some paramaters are added to aid in the "default"
# visualization of data at that resolution.)

DIGESTRESLIST	30 600 5400 21600 86400
<DIGESTRES=30>
SAVEPERIOD	         7200

COMMONRESNAME		30 Seconds
# 2 hours
PLOTPERIOD		7200
PLOT_PERIOD_NAME	2 hours
PLOT_FMT		M
</DIGESTRES>

<DIGESTRES=600>
SAVEPERIOD		86400

COMMONRESNAME		10 Minutes
# 24 hours
PLOTPERIOD		86400
PLOT_PERIOD_NAME        24 hours
# a subsequence of 'mdHMS'
PLOT_FMT                 HM
</DIGESTRES>

<DIGESTRES=5400>
SAVEPERIOD		604800

COMMONRESNAME		90 Minutes
# 7 Days
PLOTPERIOD		604800
PLOT_PERIOD_NAME        7 days
PLOT_FMT                 dH
</DIGESTRES>

<DIGESTRES=21600>
SAVEPERIOD		2678400

COMMONRESNAME		6 Hours
# 1 Month (31 days)
PLOTPERIOD		2678400
PLOT_PERIOD_NAME        1 month
PLOT_FMT                 dH
</DIGESTRES>

<DIGESTRES=86400>
# (never delete)
SAVEPERIOD		0

COMMONRESNAME		24 Hours
# 1 year (365 days)
PLOTPERIOD		31536000
PLOT_PERIOD_NAME        1 year
PLOT_FMT                 md
</DIGESTRES>

# OS specific config defs.
#<OS=Linux>
#</OS>
#<OS=*BSD>
#</OS>

# Likely to change...
# period over which summary for the grid web page is done
SUMMARY_PERIOD    300
